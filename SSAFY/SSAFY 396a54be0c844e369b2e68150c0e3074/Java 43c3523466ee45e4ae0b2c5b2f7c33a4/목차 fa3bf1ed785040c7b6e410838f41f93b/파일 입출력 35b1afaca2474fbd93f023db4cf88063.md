# 파일 입출력

## IO와 Stream

> Stream을 생성한다. 단, Input과 Output Stream은 각각 생성 해야 한다. 
InputStream의 기능은 말그대로 Input해서 흘려보낼 수 있도록 저장
OutputStream의 기능은 말 그대로 저장 되어있는 것들을 흘려보내는 Output
> 

추상클래스(컴포넌트) 아래 상속 받는 클래스

- InputStream
- OutputStream
- Reader
- Writer

장식Decoration은 컴포넌트를 생성자에서 받아들인다. 즉, 위 추상클래스를 구현한 인스턴스를 받는다는 것.

아무튼 결론은 감사고 감싸진 제일 내부의 메서드를 콜하고 콜하여 쓰는 것임. 몰라!!!!!

객체

- System.in - 키보드로 부터 입력
- System.out - 화면에 출력
- System.err - 에러 출력

### IO

- 데이터의 입력과 출력
- 컴퓨터 내부 혹은 외부의 장치와 데이터를 주고 받는 행위

### Stream

- 데이터를 운반하는데 사용되는 통로
- 단방향
- 하나의 스트림으로 입력 출력 모두 처리 불가능
- 노드 스트림, 보조스트림

### Node

- 데이터의 출발지점 혹은 목적지
    - Keyboard, monitor, file

### 입출력스트림

- 바이트 스트림
    - file에 object를 (byte로) 저장시켜놨을 때 쓰고 읽기
    - 입력 바이트 스트림 - InputStream프로그램으로 들어오는
    - 출력바이트 스트림 - OutputStream 프로그램에서 나가는
- 문자 스트림
    - file에 string으로 저장시켜놨을 때 쓰고 읽기
    - 입력 문자 스트림 - Reader, 들어오는
    - 출력 문자 스트림 - Writer, 나가는

### Stream 종류

- 데이터의 타입 : 문자, 바이트
- 노드의 종류 : 표준입출력, 파일
- 데이터의 방향 : 입력, 출력

> Writer / OutputStream : 1byte (8bit) 단위로 냅다 저장 시키는 것
Reader / InputStream : 1byte (8bit) 단위로 냅다 읽어오는 것
> 

### 바이트 스트림

- InputStream
    
    ```java
    public abstract int read()
    // 추상메서드. byte하나를 읽어 int로 반환한다. 더이상 읽을값이 없으면 -1 return
    // 8bit만 사용
    
    public int read(byte b[])
    //b[] : 버퍼. 데이터를 읽어서 b를 채우고 읽은 바이트 개수 return
    
    public int read(byte b[], int offset, int len)
    //최대 len만큼 데이터를읽어서 b의 offset부터 b에 저장하고 읽은 바이트 개수 return
    
    public  void close()
    //스트림을 종료해서 자원 반납
    ```
    
- OutputStream
    
    ```java
    public abstract void write(int b)
    //b의 내용을 byte로 출력
    
    public void write(byte b[])
    
    public void flush()
    //버퍼가 있는 스트림에서 버퍼의 내용을 출력하고 버퍼를 비운다. 
    
    public void close()
    //스트림을 종료해서 자원 반납. close는 내부적으로 flush를 호출
    
    ```
    

### 문자 스트림

> 진짜 string을 읽어오는 것
> 

- Reader
    
    ```java
    public abstract int read()
    // 추상메서드. byte하나를 읽어 int로 반환한다. 더이상 읽을값이 없으면 -1 return
    // 8bit만 사용
    
    public int read(char c[])
    //c[] : 버퍼. 데이터를 읽어서 b를 채우고 읽은 바이트 개수 return
    
    public int read(CharBuffer target)
    //최대 len만큼 데이터를읽어서 b의 offset부터 b에 저장하고 읽은 바이트 개수 return
    
    public  void close()
    //스트림을 종료해서 자원 반납
    ```
    
- Writer
    
    ```java
    public abstract void write(int b)
    //b의 내용을 byte로 출력
    
    public void write(char[] c)
    
    abstract public void flush()
    //버퍼가 있는 스트림에서 버퍼의 내용을 출력하고 버퍼를 비운다. 
    
    abstract public void close()
    //스트림을 종료해서 자원 반납. close는 내부적으로 flush를 호출
    ```
    

### File / Directory

- 특정 파일에 대한 정보를 객체화 해서 관리

### 보조 스트림

- 스트림의 기능 보완하기 위해 사용(추가기능)
- 노드 스트림 생성 후 보조 스트림 생성하여 사용 가능
- 실제 데이터를 주고 받는 스트림이 아니라서 보조 스트림만으로 입출력 불가
- 보조스트림의 close를 호출하면 노드 스트림의 close도 호출

보조스트림 종류(출력은 Output)

- FilterInputStream
- BufferedInputStream
- BufferedReader
- ObjectInputStream
- DataInputStream
- InputstreamReader

## 객체 직렬화

### 직렬화(serialization)

- 객체가 가진 데이터를 순차적인 형태로 변환하는 절차
- 객체를 데이터 스트림으로 만드는 것
- 반대의 경우 역직렬화

### 직렬화 가능 클래스 만들기

- Serializable인터페이스 구현
- 해당 인터페이스를 구현한 클래스를 상속받았다면 구현하지 않아도 된다.
- 자손에만 구현했다면 조상 클래스는 직렬화 되지 않는다.
- transient키워드를 통해 직렬화 대상에서 제외 시킬 수 있다.

### serialVersionUID

- 직렬화 된 객체를 역직렬화 할 때는 직렬화 했을 때와 같은 클래스를 사용해야 한다.
- 따라서 해당 UID를 활용하여 클래스의 변경여부 파악
- 작성하지 않으면 컴파일러가 자동으로 생성 → 작성하는 것을 권장